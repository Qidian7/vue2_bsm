{"ast":null,"code":"import { info, getInfo, changeInfo } from \"@/api/api\";\nexport default {\n  name: \"InfoList\",\n  data() {\n    return {\n      tableData: [],\n      dialogFormVisible: false,\n      form: {\n        name: \"\",\n        sex: \"1\",\n        age: \"\",\n        father: \"\",\n        mother: \"\",\n        address: \"\",\n        time: \"\",\n        phone: \"\"\n      },\n      state: true,\n      formLabelWidth: \"80px\",\n      rules: {\n        name: [{\n          required: true,\n          message: \"请输入姓名\"\n        }],\n        sex: [{\n          required: true\n        }],\n        age: [{\n          required: true,\n          message: \"请输入年龄\"\n        }],\n        address: [{\n          required: true,\n          message: \"请输入地址\"\n        }],\n        time: [{\n          required: true\n        }],\n        phone: [{\n          required: true,\n          message: \"请输入联系方式\"\n        }]\n      },\n      total: 0\n    };\n  },\n  created() {\n    this.getData();\n  },\n  methods: {\n    del() {},\n    edit(row) {\n      this.form = row;\n      this.state = false;\n      this.dialogFormVisible = true;\n      this.title = \"修改学生信息\";\n    },\n    addStudent() {\n      this.form = {\n        name: \"\",\n        sex: \"1\",\n        age: \"\",\n        father: \"\",\n        mother: \"\",\n        address: \"\",\n        time: \"\",\n        phone: \"\"\n      };\n      this.dialogFormVisible = true;\n      this.state = true;\n    },\n    getData() {\n      getInfo().then(res => {\n        if (res.status === 200) {\n          this.tableData = res.data.data;\n          this.total = res.data.total;\n        }\n      });\n    },\n    sure(form) {\n      this.$refs[form].validate(valid => {\n        if (valid) {\n          console.log(form, this.form);\n          if (this.state) {\n            info(this.form).then(res => {\n              console.log(res);\n              if (res.status === 200) {\n                this.getData();\n                this.dialogFormVisible = false;\n                this.$refs[form].resetFields();\n                this.$message({\n                  type: \"success\",\n                  message: res.data.message\n                });\n              }\n            });\n          } else {\n            changeInfo(this.form).then(res => {\n              if (this.status === 200) {\n                this.getData();\n                this.dialogFormVisible = false;\n                this.$refs[form].resetFields();\n                this.$message({\n                  type: \"success\",\n                  message: res.data.message\n                });\n              }\n            });\n          }\n        }\n      });\n    }\n  }\n};","map":{"version":3,"names":["info","getInfo","changeInfo","name","data","tableData","dialogFormVisible","form","sex","age","father","mother","address","time","phone","state","formLabelWidth","rules","required","message","total","created","getData","methods","del","edit","row","title","addStudent","then","res","status","sure","$refs","validate","valid","console","log","resetFields","$message","type"],"sources":["src/components/Student/InfoList.vue"],"sourcesContent":["<template>\n  <div class=\"infoList\">\n    <el-form :inline=\"true\" class=\"demo-form-inline\" size=\"small\">\n      <el-form-item>\n        <el-button type=\"primary\" @click=\"addStudent\">新增</el-button>\n      </el-form-item>\n    </el-form>\n    <!--  -->\n    <el-table :data=\"tableData\" border style=\"width: 100%\">\n      <!-- width+180px 改成 align=\"center\" 居中显示去除滚动条 -->\n      <el-table-column prop=\"name\" label=\"姓名\" align=\"center\">\n      </el-table-column>\n      <el-table-column prop=\"sex\" label=\"性别\" align=\"center\">\n      </el-table-column>\n      <el-table-column prop=\"age\" label=\"年龄\" align=\"center\">\n      </el-table-column>\n      <el-table-column prop=\"father\" label=\"父亲\" align=\"center\">\n      </el-table-column>\n      <el-table-column prop=\"mother\" label=\"母亲\" align=\"center\">\n      </el-table-column>\n      <el-table-column prop=\"address\" label=\"家庭住址\" align=\"center\">\n      </el-table-column>\n      <el-table-column prop=\"time\" label=\"入校时间\" align=\"center\">\n      </el-table-column>\n      <el-table-column prop=\"phone\" label=\"联系方式\" align=\"center\">\n      </el-table-column>\n      <el-table-column label=\"操作\" align=\"center\">\n        <template slot-scope=\"scope\">\n          <el-button\n            type=\"danger\"\n            size=\"mini\"\n            icon=\"el-icon-delete\"\n            @click=\"del(scope.row)\"\n          >\n          </el-button>\n          <el-button\n            type=\"primary\"\n            size=\"mini\"\n            icon=\"el-icon-edit\"\n            @click=\"edit(scope.row)\"\n          >\n          </el-button>\n        </template>\n      </el-table-column>\n    </el-table>\n    <!--  -->\n    <el-dialog\n      :title=\"state ? '添加学生信息' : '修改学生信息'\"\n      :visible.sync=\"dialogFormVisible\"\n      width=\"500px\"\n    >\n      <el-form :model=\"form\" :rules=\"rules\" ref=\"form\">\n        <el-form-item label=\"姓名\" :label-width=\"formLabelWidth\" prop=\"name\">\n          <el-input v-model=\"form.name\" autocomplete=\"off\"></el-input>\n        </el-form-item>\n        <el-form-item label=\"性别\" :label-width=\"formLabelWidth\" prop=\"sex\">\n          <el-radio v-model=\"form.sex\" label=\"1\">男</el-radio>\n          <el-radio v-model=\"form.sex\" label=\"2\">女</el-radio>\n        </el-form-item>\n        <el-form-item label=\"年龄\" :label-width=\"formLabelWidth\" prop=\"age\">\n          <el-input v-model=\"form.age\" autocomplete=\"off\"></el-input>\n        </el-form-item>\n        <el-form-item\n          label=\"父亲姓名\"\n          :label-width=\"formLabelWidth\"\n          prop=\"father\"\n        >\n          <el-input v-model=\"form.father\" autocomplete=\"off\"></el-input>\n        </el-form-item>\n        <el-form-item\n          label=\"母亲姓名\"\n          :label-width=\"formLabelWidth\"\n          prop=\"mother\"\n        >\n          <el-input v-model=\"form.mother\" autocomplete=\"off\"></el-input>\n        </el-form-item>\n        <el-form-item\n          label=\"家庭住址\"\n          :label-width=\"formLabelWidth\"\n          prop=\"address\"\n        >\n          <el-input v-model=\"form.address\" autocomplete=\"off\"></el-input>\n        </el-form-item>\n        <el-form-item\n          label=\"入校时间\"\n          :label-width=\"formLabelWidth\"\n          prop=\"time\"\n        >\n          <!-- formar value-formar 是elementui自带的 -->\n          <el-date-picker\n            v-model=\"form.time\"\n            align=\"right\"\n            format=\"yyyy年 mm 月 dd 日\"\n            value-format=\"yyyy-mm-dd\"\n            type=\"date\"\n            placeholder=\"选择日期\"\n          >\n          </el-date-picker>\n        </el-form-item>\n        <el-form-item\n          label=\"联系方式\"\n          :label-width=\"formLabelWidth\"\n          prop=\"phone\"\n        >\n          <el-input v-model=\"form.phone\" autocomplete=\"off\"></el-input>\n        </el-form-item>\n      </el-form>\n      <div slot=\"footer\" class=\"dialog-footer\">\n        <el-button @click=\"dialogFormVisible = false\"> 取 消 </el-button>\n        <el-button type=\"primary\" @click=\"sure('form')\"> 确 定 </el-button>\n      </div>\n    </el-dialog>\n  </div>\n</template>\n\n<script>\nimport { info, getInfo, changeInfo } from \"@/api/api\";\nexport default {\n  name: \"InfoList\",\n  data() {\n    return {\n      tableData: [],\n      dialogFormVisible: false,\n      form: {\n        name: \"\",\n        sex: \"1\",\n        age: \"\",\n        father: \"\",\n        mother: \"\",\n        address: \"\",\n        time: \"\",\n        phone: \"\",\n      },\n      state: true,\n      formLabelWidth: \"80px\",\n      rules: {\n        name: [\n          {\n            required: true,\n            message: \"请输入姓名\",\n          },\n        ],\n        sex: [\n          {\n            required: true,\n          },\n        ],\n        age: [\n          {\n            required: true,\n            message: \"请输入年龄\",\n          },\n        ],\n        address: [\n          {\n            required: true,\n            message: \"请输入地址\",\n          },\n        ],\n        time: [\n          {\n            required: true,\n          },\n        ],\n        phone: [\n          {\n            required: true,\n            message: \"请输入联系方式\",\n          },\n        ],\n      },\n      total: 0,\n    };\n  },\n  created() {\n    this.getData();\n  },\n  methods: {\n    del() {},\n    edit(row) {\n      this.form = row;\n      this.state = false;\n      this.dialogFormVisible = true;\n      this.title = \"修改学生信息\";\n    },\n    addStudent() {\n      this.form = {\n        name: \"\",\n        sex: \"1\",\n        age: \"\",\n        father: \"\",\n        mother: \"\",\n        address: \"\",\n        time: \"\",\n        phone: \"\",\n      };\n      this.dialogFormVisible = true;\n      this.state = true;\n    },\n    getData() {\n      getInfo().then((res) => {\n        if (res.status === 200) {\n          this.tableData = res.data.data;\n          this.total = res.data.total;\n        }\n      });\n    },\n    sure(form) {\n      this.$refs[form].validate((valid) => {\n        if (valid) {\n          console.log(form, this.form);\n          if (this.state) {\n            info(this.form).then((res) => {\n              console.log(res);\n              if (res.status === 200) {\n                this.getData();\n                this.dialogFormVisible = false;\n                this.$refs[form].resetFields();\n                this.$message({ type: \"success\", message: res.data.message });\n              }\n            });\n          } else {\n            changeInfo(this.form).then((res) => {\n              if (this.status === 200) {\n                this.getData();\n                this.dialogFormVisible = false;\n                this.$refs[form].resetFields();\n                this.$message({ type: \"success\", message: res.data.message });\n              }\n            });\n          }\n        }\n      });\n    },\n  },\n};\n</script>\n\n<style lang=\"scss\" scoped>\n.infoList {\n  .demo-form-inline,\n  .el-form-item {\n    text-align: left;\n  }\n  .el-pagination {\n    text-align: left;\n    margin-top: 20px;\n  }\n}\n</style>\n"],"mappings":"AAoHA,SAAAA,IAAA,EAAAC,OAAA,EAAAC,UAAA;AACA;EACAC,IAAA;EACAC,KAAA;IACA;MACAC,SAAA;MACAC,iBAAA;MACAC,IAAA;QACAJ,IAAA;QACAK,GAAA;QACAC,GAAA;QACAC,MAAA;QACAC,MAAA;QACAC,OAAA;QACAC,IAAA;QACAC,KAAA;MACA;MACAC,KAAA;MACAC,cAAA;MACAC,KAAA;QACAd,IAAA,GACA;UACAe,QAAA;UACAC,OAAA;QACA,EACA;QACAX,GAAA,GACA;UACAU,QAAA;QACA,EACA;QACAT,GAAA,GACA;UACAS,QAAA;UACAC,OAAA;QACA,EACA;QACAP,OAAA,GACA;UACAM,QAAA;UACAC,OAAA;QACA,EACA;QACAN,IAAA,GACA;UACAK,QAAA;QACA,EACA;QACAJ,KAAA,GACA;UACAI,QAAA;UACAC,OAAA;QACA;MAEA;MACAC,KAAA;IACA;EACA;EACAC,QAAA;IACA,KAAAC,OAAA;EACA;EACAC,OAAA;IACAC,IAAA;IACAC,KAAAC,GAAA;MACA,KAAAnB,IAAA,GAAAmB,GAAA;MACA,KAAAX,KAAA;MACA,KAAAT,iBAAA;MACA,KAAAqB,KAAA;IACA;IACAC,WAAA;MACA,KAAArB,IAAA;QACAJ,IAAA;QACAK,GAAA;QACAC,GAAA;QACAC,MAAA;QACAC,MAAA;QACAC,OAAA;QACAC,IAAA;QACAC,KAAA;MACA;MACA,KAAAR,iBAAA;MACA,KAAAS,KAAA;IACA;IACAO,QAAA;MACArB,OAAA,GAAA4B,IAAA,CAAAC,GAAA;QACA,IAAAA,GAAA,CAAAC,MAAA;UACA,KAAA1B,SAAA,GAAAyB,GAAA,CAAA1B,IAAA,CAAAA,IAAA;UACA,KAAAgB,KAAA,GAAAU,GAAA,CAAA1B,IAAA,CAAAgB,KAAA;QACA;MACA;IACA;IACAY,KAAAzB,IAAA;MACA,KAAA0B,KAAA,CAAA1B,IAAA,EAAA2B,QAAA,CAAAC,KAAA;QACA,IAAAA,KAAA;UACAC,OAAA,CAAAC,GAAA,CAAA9B,IAAA,OAAAA,IAAA;UACA,SAAAQ,KAAA;YACAf,IAAA,MAAAO,IAAA,EAAAsB,IAAA,CAAAC,GAAA;cACAM,OAAA,CAAAC,GAAA,CAAAP,GAAA;cACA,IAAAA,GAAA,CAAAC,MAAA;gBACA,KAAAT,OAAA;gBACA,KAAAhB,iBAAA;gBACA,KAAA2B,KAAA,CAAA1B,IAAA,EAAA+B,WAAA;gBACA,KAAAC,QAAA;kBAAAC,IAAA;kBAAArB,OAAA,EAAAW,GAAA,CAAA1B,IAAA,CAAAe;gBAAA;cACA;YACA;UACA;YACAjB,UAAA,MAAAK,IAAA,EAAAsB,IAAA,CAAAC,GAAA;cACA,SAAAC,MAAA;gBACA,KAAAT,OAAA;gBACA,KAAAhB,iBAAA;gBACA,KAAA2B,KAAA,CAAA1B,IAAA,EAAA+B,WAAA;gBACA,KAAAC,QAAA;kBAAAC,IAAA;kBAAArB,OAAA,EAAAW,GAAA,CAAA1B,IAAA,CAAAe;gBAAA;cACA;YACA;UACA;QACA;MACA;IACA;EACA;AACA"},"metadata":{},"sourceType":"module","externalDependencies":[]}