{"ast":null,"code":"import { SafeSubscriber, Subscriber } from './Subscriber';\nimport { isSubscription } from './Subscription';\nimport { observable as Symbol_observable } from './symbol/observable';\nimport { pipeFromArray } from './util/pipe';\nimport { config } from './config';\nimport { isFunction } from './util/isFunction';\nimport { errorContext } from './util/errorContext';\nvar Observable = function () {\n  function Observable(subscribe) {\n    if (subscribe) {\n      this._subscribe = subscribe;\n    }\n  }\n  Observable.prototype.lift = function (operator) {\n    var observable = new Observable();\n    observable.source = this;\n    observable.operator = operator;\n    return observable;\n  };\n  Observable.prototype.subscribe = function (observerOrNext, error, complete) {\n    var _this = this;\n    var subscriber = isSubscriber(observerOrNext) ? observerOrNext : new SafeSubscriber(observerOrNext, error, complete);\n    errorContext(function () {\n      var _a = _this,\n        operator = _a.operator,\n        source = _a.source;\n      subscriber.add(operator ? operator.call(subscriber, source) : source ? _this._subscribe(subscriber) : _this._trySubscribe(subscriber));\n    });\n    return subscriber;\n  };\n  Observable.prototype._trySubscribe = function (sink) {\n    try {\n      return this._subscribe(sink);\n    } catch (err) {\n      sink.error(err);\n    }\n  };\n  Observable.prototype.forEach = function (next, promiseCtor) {\n    var _this = this;\n    promiseCtor = getPromiseCtor(promiseCtor);\n    return new promiseCtor(function (resolve, reject) {\n      var subscriber = new SafeSubscriber({\n        next: function (value) {\n          try {\n            next(value);\n          } catch (err) {\n            reject(err);\n            subscriber.unsubscribe();\n          }\n        },\n        error: reject,\n        complete: resolve\n      });\n      _this.subscribe(subscriber);\n    });\n  };\n  Observable.prototype._subscribe = function (subscriber) {\n    var _a;\n    return (_a = this.source) === null || _a === void 0 ? void 0 : _a.subscribe(subscriber);\n  };\n  Observable.prototype[Symbol_observable] = function () {\n    return this;\n  };\n  Observable.prototype.pipe = function () {\n    var operations = [];\n    for (var _i = 0; _i < arguments.length; _i++) {\n      operations[_i] = arguments[_i];\n    }\n    return pipeFromArray(operations)(this);\n  };\n  Observable.prototype.toPromise = function (promiseCtor) {\n    var _this = this;\n    promiseCtor = getPromiseCtor(promiseCtor);\n    return new promiseCtor(function (resolve, reject) {\n      var value;\n      _this.subscribe(function (x) {\n        return value = x;\n      }, function (err) {\n        return reject(err);\n      }, function () {\n        return resolve(value);\n      });\n    });\n  };\n  Observable.create = function (subscribe) {\n    return new Observable(subscribe);\n  };\n  return Observable;\n}();\nexport { Observable };\nfunction getPromiseCtor(promiseCtor) {\n  var _a;\n  return (_a = promiseCtor !== null && promiseCtor !== void 0 ? promiseCtor : config.Promise) !== null && _a !== void 0 ? _a : Promise;\n}\nfunction isObserver(value) {\n  return value && isFunction(value.next) && isFunction(value.error) && isFunction(value.complete);\n}\nfunction isSubscriber(value) {\n  return value && value instanceof Subscriber || isObserver(value) && isSubscription(value);\n}","map":{"version":3,"names":["SafeSubscriber","Subscriber","isSubscription","observable","Symbol_observable","pipeFromArray","config","isFunction","errorContext","Observable","subscribe","_subscribe","prototype","lift","operator","source","observerOrNext","error","complete","_this","subscriber","isSubscriber","_a","add","call","_trySubscribe","sink","err","forEach","next","promiseCtor","getPromiseCtor","resolve","reject","value","unsubscribe","pipe","operations","_i","arguments","length","toPromise","x","create","Promise","isObserver"],"sources":["../../../src/internal/Observable.ts"],"sourcesContent":[null],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}