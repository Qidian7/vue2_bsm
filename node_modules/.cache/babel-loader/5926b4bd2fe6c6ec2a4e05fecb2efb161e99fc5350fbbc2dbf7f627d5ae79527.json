{"ast":null,"code":"import { Observable } from '../Observable';\nimport { argsArgArrayOrObject } from '../util/argsArgArrayOrObject';\nimport { innerFrom } from './innerFrom';\nimport { popResultSelector } from '../util/args';\nimport { createOperatorSubscriber } from '../operators/OperatorSubscriber';\nimport { mapOneOrManyArgs } from '../util/mapOneOrManyArgs';\nimport { createObject } from '../util/createObject';\nexport function forkJoin() {\n  var args = [];\n  for (var _i = 0; _i < arguments.length; _i++) {\n    args[_i] = arguments[_i];\n  }\n  var resultSelector = popResultSelector(args);\n  var _a = argsArgArrayOrObject(args),\n    sources = _a.args,\n    keys = _a.keys;\n  var result = new Observable(function (subscriber) {\n    var length = sources.length;\n    if (!length) {\n      subscriber.complete();\n      return;\n    }\n    var values = new Array(length);\n    var remainingCompletions = length;\n    var remainingEmissions = length;\n    var _loop_1 = function (sourceIndex) {\n      var hasValue = false;\n      innerFrom(sources[sourceIndex]).subscribe(createOperatorSubscriber(subscriber, function (value) {\n        if (!hasValue) {\n          hasValue = true;\n          remainingEmissions--;\n        }\n        values[sourceIndex] = value;\n      }, function () {\n        return remainingCompletions--;\n      }, undefined, function () {\n        if (!remainingCompletions || !hasValue) {\n          if (!remainingEmissions) {\n            subscriber.next(keys ? createObject(keys, values) : values);\n          }\n          subscriber.complete();\n        }\n      }));\n    };\n    for (var sourceIndex = 0; sourceIndex < length; sourceIndex++) {\n      _loop_1(sourceIndex);\n    }\n  });\n  return resultSelector ? result.pipe(mapOneOrManyArgs(resultSelector)) : result;\n}","map":{"version":3,"names":["Observable","argsArgArrayOrObject","innerFrom","popResultSelector","createOperatorSubscriber","mapOneOrManyArgs","createObject","forkJoin","args","_i","arguments","length","resultSelector","_a","sources","keys","result","subscriber","complete","values","Array","remainingCompletions","remainingEmissions","sourceIndex","hasValue","subscribe","value","undefined","next","pipe"],"sources":["../../../../src/internal/observable/forkJoin.ts"],"sourcesContent":[null],"mappings":"AAAA,SAASA,UAAU,QAAQ,eAAe;AAE1C,SAASC,oBAAoB,QAAQ,8BAA8B;AACnE,SAASC,SAAS,QAAQ,aAAa;AACvC,SAASC,iBAAiB,QAAQ,cAAc;AAChD,SAASC,wBAAwB,QAAQ,iCAAiC;AAC1E,SAASC,gBAAgB,QAAQ,0BAA0B;AAC3D,SAASC,YAAY,QAAQ,sBAAsB;AA2InD,OAAM,SAAUC,QAAQA,CAAA;EAAC,IAAAC,IAAA;OAAA,IAAAC,EAAA,IAAc,EAAdA,EAAA,GAAAC,SAAA,CAAAC,MAAc,EAAdF,EAAA,EAAc;IAAdD,IAAA,CAAAC,EAAA,IAAAC,SAAA,CAAAD,EAAA;;EACvB,IAAMG,cAAc,GAAGT,iBAAiB,CAACK,IAAI,CAAC;EACxC,IAAAK,EAAA,GAA0BZ,oBAAoB,CAACO,IAAI,CAAC;IAA5CM,OAAO,GAAAD,EAAA,CAAAL,IAAA;IAAEO,IAAI,GAAAF,EAAA,CAAAE,IAA+B;EAC1D,IAAMC,MAAM,GAAG,IAAIhB,UAAU,CAAC,UAACiB,UAAU;IAC/B,IAAAN,MAAM,GAAKG,OAAO,CAAAH,MAAZ;IACd,IAAI,CAACA,MAAM,EAAE;MACXM,UAAU,CAACC,QAAQ,EAAE;MACrB;;IAEF,IAAMC,MAAM,GAAG,IAAIC,KAAK,CAACT,MAAM,CAAC;IAChC,IAAIU,oBAAoB,GAAGV,MAAM;IACjC,IAAIW,kBAAkB,GAAGX,MAAM;4BACtBY,WAAW;MAClB,IAAIC,QAAQ,GAAG,KAAK;MACpBtB,SAAS,CAACY,OAAO,CAACS,WAAW,CAAC,CAAC,CAACE,SAAS,CACvCrB,wBAAwB,CACtBa,UAAU,EACV,UAACS,KAAK;QACJ,IAAI,CAACF,QAAQ,EAAE;UACbA,QAAQ,GAAG,IAAI;UACfF,kBAAkB,EAAE;;QAEtBH,MAAM,CAACI,WAAW,CAAC,GAAGG,KAAK;MAC7B,CAAC,EACD;QAAM,OAAAL,oBAAoB,EAAE;MAAtB,CAAsB,EAC5BM,SAAS,EACT;QACE,IAAI,CAACN,oBAAoB,IAAI,CAACG,QAAQ,EAAE;UACtC,IAAI,CAACF,kBAAkB,EAAE;YACvBL,UAAU,CAACW,IAAI,CAACb,IAAI,GAAGT,YAAY,CAACS,IAAI,EAAEI,MAAM,CAAC,GAAGA,MAAM,CAAC;;UAE7DF,UAAU,CAACC,QAAQ,EAAE;;MAEzB,CAAC,CACF,CACF;;IAvBH,KAAK,IAAIK,WAAW,GAAG,CAAC,EAAEA,WAAW,GAAGZ,MAAM,EAAEY,WAAW,EAAE;cAApDA,WAAW;;EAyBtB,CAAC,CAAC;EACF,OAAOX,cAAc,GAAGI,MAAM,CAACa,IAAI,CAACxB,gBAAgB,CAACO,cAAc,CAAC,CAAC,GAAGI,MAAM;AAChF"},"metadata":{},"sourceType":"module","externalDependencies":[]}