{"ast":null,"code":"import { __read } from \"tslib\";\nimport { innerFrom } from '../observable/innerFrom';\nimport { Observable } from '../Observable';\nimport { mergeMap } from '../operators/mergeMap';\nimport { isArrayLike } from '../util/isArrayLike';\nimport { isFunction } from '../util/isFunction';\nimport { mapOneOrManyArgs } from '../util/mapOneOrManyArgs';\nvar nodeEventEmitterMethods = ['addListener', 'removeListener'];\nvar eventTargetMethods = ['addEventListener', 'removeEventListener'];\nvar jqueryMethods = ['on', 'off'];\nexport function fromEvent(target, eventName, options, resultSelector) {\n  if (isFunction(options)) {\n    resultSelector = options;\n    options = undefined;\n  }\n  if (resultSelector) {\n    return fromEvent(target, eventName, options).pipe(mapOneOrManyArgs(resultSelector));\n  }\n  var _a = __read(isEventTarget(target) ? eventTargetMethods.map(function (methodName) {\n      return function (handler) {\n        return target[methodName](eventName, handler, options);\n      };\n    }) : isNodeStyleEventEmitter(target) ? nodeEventEmitterMethods.map(toCommonHandlerRegistry(target, eventName)) : isJQueryStyleEventEmitter(target) ? jqueryMethods.map(toCommonHandlerRegistry(target, eventName)) : [], 2),\n    add = _a[0],\n    remove = _a[1];\n  if (!add) {\n    if (isArrayLike(target)) {\n      return mergeMap(function (subTarget) {\n        return fromEvent(subTarget, eventName, options);\n      })(innerFrom(target));\n    }\n  }\n  if (!add) {\n    throw new TypeError('Invalid event target');\n  }\n  return new Observable(function (subscriber) {\n    var handler = function () {\n      var args = [];\n      for (var _i = 0; _i < arguments.length; _i++) {\n        args[_i] = arguments[_i];\n      }\n      return subscriber.next(1 < args.length ? args : args[0]);\n    };\n    add(handler);\n    return function () {\n      return remove(handler);\n    };\n  });\n}\nfunction toCommonHandlerRegistry(target, eventName) {\n  return function (methodName) {\n    return function (handler) {\n      return target[methodName](eventName, handler);\n    };\n  };\n}\nfunction isNodeStyleEventEmitter(target) {\n  return isFunction(target.addListener) && isFunction(target.removeListener);\n}\nfunction isJQueryStyleEventEmitter(target) {\n  return isFunction(target.on) && isFunction(target.off);\n}\nfunction isEventTarget(target) {\n  return isFunction(target.addEventListener) && isFunction(target.removeEventListener);\n}","map":{"version":3,"names":["innerFrom","Observable","mergeMap","isArrayLike","isFunction","mapOneOrManyArgs","nodeEventEmitterMethods","eventTargetMethods","jqueryMethods","fromEvent","target","eventName","options","resultSelector","undefined","pipe","_a","__read","isEventTarget","map","methodName","handler","isNodeStyleEventEmitter","toCommonHandlerRegistry","isJQueryStyleEventEmitter","add","remove","subTarget","TypeError","subscriber","args","_i","arguments","length","next","addListener","removeListener","on","off","addEventListener","removeEventListener"],"sources":["../../../../src/internal/observable/fromEvent.ts"],"sourcesContent":[null],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}