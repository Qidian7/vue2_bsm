{"version":3,"file":"js/391.0de38da7.js","mappings":"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","sources":["webpack://vue2_bsm/./src/components/Login.vue","webpack://vue2_bsm/./src/utils/validate.js","webpack://vue2_bsm/src/components/Login.vue","webpack://vue2_bsm/./src/components/Login.vue?0800","webpack://vue2_bsm/./src/components/Login.vue?f3db","webpack://vue2_bsm/./src/api/api.js"],"sourcesContent":["var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"login\"},[_c('el-card',{staticClass:\"box-card\"},[_c('div',{staticClass:\"clearfix\",attrs:{\"slot\":\"header\"},slot:\"header\"},[_c('span',[_vm._v(\"314-2管理系统\")])]),_c('el-form',{ref:\"form\",attrs:{\"label-width\":\"80px\",\"model\":_vm.form,\"rules\":_vm.rules}},[_c('el-form-item',{attrs:{\"label\":\"用户名\",\"prop\":\"username\"}},[_c('el-input',{model:{value:(_vm.form.username),callback:function ($$v) {_vm.$set(_vm.form, \"username\", $$v)},expression:\"form.username\"}})],1),_c('el-form-item',{attrs:{\"label\":\"密码\",\"prop\":\"password\"}},[_c('el-input',{attrs:{\"type\":\"password\"},model:{value:(_vm.form.password),callback:function ($$v) {_vm.$set(_vm.form, \"password\", $$v)},expression:\"form.password\"}})],1),_c('el-form-item',[_c('el-button',{attrs:{\"type\":\"primary\"},on:{\"click\":function($event){return _vm.login('form')}}},[_vm._v(\"登录\")])],1)],1)],1)],1)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","// 用户名匹配\nexport function nameRule(rule, value, callback) {\n  // 4-8位昵称\n  let reg = /^[a-zA-Z0-9]{4,8}$/;\n  if (value === \"\" || value === undefined || value === null) {\n    callback(new Error(\"请输入用户名\"));\n  } else if (!reg.test(value)) {\n    callback(new Error(\"请输入4-8位昵称\"));\n  } else {\n    callback();\n  }\n}\n// 密码匹配\nexport function pwdRule(rule, value, callback) {\n  // 6-12位密码\n  let pwd = /^\\S*(?=\\S{6,12})(?=\\S*\\d)(?=\\S*[A-Z])(?=\\S*[a-z])(?=\\S*[!_.])\\S*$/;\n  if (value === \"\" || value === undefined || value === null) {\n    callback(new Error(\"请输入密码\"));\n  } else if (!pwd.test(value)) {\n    callback(new Error(\"请输入6-12位密码,需要包含大小写字母和数字及特殊符号\"));\n  } else {\n    callback();\n  }\n}\n","<!-- 登录页面注重的是表单的提交 -->\n<template>\n  <div class=\"login\">\n    <el-card class=\"box-card\">\n      <div slot=\"header\" class=\"clearfix\">\n        <span>314-2管理系统</span>\n      </div>\n      <el-form label-width=\"80px\" :model=\"form\" ref=\"form\" :rules=\"rules\">\n        <!-- prop用来表单验证 -->\n        <el-form-item label=\"用户名\" prop=\"username\">\n          <el-input v-model=\"form.username\"></el-input>\n        </el-form-item>\n        <el-form-item label=\"密码\" prop=\"password\">\n          <el-input type=\"password\" v-model=\"form.password\"></el-input>\n        </el-form-item>\n        <el-form-item>\n          <el-button type=\"primary\" @click=\"login('form')\">登录</el-button>\n        </el-form-item>\n      </el-form>\n    </el-card>\n  </div>\n</template>\n\n<script>\n// 把正则判定拉出去放到utils里面封装\nimport { nameRule, pwdRule } from \"../utils/validate.js\";\nimport { setToken } from \"../utils/setToken.js\";\nimport { login } from \"@/api/api\";\nexport default {\n  name: \"Login\",\n  data() {\n    return {\n      form: {\n        username: \"\",\n        password: \"\",\n      },\n      rules: {\n        username: [\n          //新方法 自定义校验规则\n          { required: true, validator: nameRule, trigger: \"blur\" },\n          //旧方法\n          //   { required: true, message: \"请输入用户名\", trigger: \"blur\" },\n          //   { min: 6, max: 10, message: \"长度在6-10位字符之间\", trigger: \"blur\" },\n        ],\n        password: [\n          //新方法 自定义校验规则\n          { required: true, validator: pwdRule, trigger: \"blur\" },\n          //旧方法\n          //   { required: true, message: \"请输入密码\", trigger: \"blur\" },\n          //   { min: 6, max: 12, message: \"长度在6-10位字符之间\", trigger: \"blur\" },\n        ],\n      },\n    };\n  },\n  methods: {\n    login(form) {\n      this.$refs[form].validate((valid) => {\n        if (valid) {\n          console.log(this.form);\n          /*\n           把这个登录封装成api进行调用\n          this.service.post(\"/login\", this.form).then((res) => {\n            if (res.status === 200) {\n              setToken(\"username\", res.data.username);\n              setToken(\"token\", res.data.token);\n              this.$message({ message: res.data.message, type: \"success\" });\n              this.$router.push(\"/home\");\n            }\n            // console.log(res);\n          });\n          */\n          login(this.form).then((res) => {\n            if (res.status === 200) {\n              setToken(\"username\", res.data.username);\n              setToken(\"token\", res.data.token);\n              this.$message({ message: res.data.message, type: \"success\" });\n              this.$router.push(\"/home\");\n            }\n          });\n        } else {\n          console.error(this.form);\n        }\n      });\n    },\n  },\n};\n</script>\n\n<style lang=\"scss\">\n.login {\n  width: 100%;\n  height: 100%;\n  position: absolute;\n  //   background-color: #409eff;\n  background: url(../assets/pic/bg1.jpeg) center no-repeat;\n  background-size: 100%;\n  .box-card {\n    width: 450px;\n    margin: 200px auto;\n    // color: #fff;\n    opacity: 0.78;\n    .clearfix {\n      font-size: 36px;\n      text-align: center;\n    }\n    .el-button {\n      width: 50%;\n      transform: translateX(50px);\n    }\n  }\n}\n</style>\n","import mod from \"-!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./Login.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./Login.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Login.vue?vue&type=template&id=308118e0&\"\nimport script from \"./Login.vue?vue&type=script&lang=js&\"\nexport * from \"./Login.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Login.vue?vue&type=style&index=0&id=308118e0&prod&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","//项目中大多数会把大多数接口请求封装成api来调用\nimport service from \"@/service\";\nimport qs from \"qs\";\n\n// 登录接口封装\nexport function login(data) {\n  return service({\n    method: \"post\",\n    url: \"/login\",\n    data: data,\n  });\n}\n// 学生列表查询接口封装\nexport function students(params) {\n  return service({\n    method: \"get\",\n    url: \"/students\",\n    params: params,\n  });\n}\n\n// 学生列表删除接口\nexport function studentDelete(id) {\n  return service({\n    method: \"delete\",\n    url: `/students/${id}`,\n  });\n}\n\n// 信息列表 新增接口\n// export function info(data) {\n//   data = qs.stringify(data);\n//   return service({\n//     method: \"post\",\n//     url: \"/info\",\n//     data: data,\n//   });\n// }\n\n// 信息列表新增和修改接口\n// 通过type进行控制\nexport function info(type, data) {\n  data = qs.stringify(data);\n  let obj = { method: type, url: \"/info\", data };\n  return service(obj);\n}\n\n// 信息列表 修改接口\n// export function changeInfo(data) {\n//   data = qs.stringify(data);\n//   return service({\n//     method: \"put\",\n//     url: \"/info\",\n//     data: data,\n//   });\n// }\n\n// 信息列表 查询接口\nexport function getInfo() {\n  return service({\n    method: \"get\",\n    url: \"/info\",\n  });\n}\n\n// 信息列表 删除接口\nexport function infoDelete(id) {\n  return service({\n    method: \"delete\",\n    url: `/info/${id}`,\n  });\n}\n\n// 作业列表 获取数据\nexport function works(params) {\n  return service({\n    method: \"get\",\n    url: \"/works\",\n    params,\n  });\n}\n\n// echart接口封装\nexport function dataView() {\n  return service({\n    method: \"get\",\n    url: \"dataview\",\n  });\n}\n\n// 封装地图接口\nexport function travel() {\n  return service({\n    method: \"get\",\n    url: \"/travel\",\n  });\n}\n"],"names":["render","_vm","this","_c","_self","staticClass","attrs","slot","_v","ref","form","rules","model","value","username","callback","$$v","$set","expression","password","on","$event","login","staticRenderFns","nameRule","rule","reg","undefined","Error","test","pwdRule","pwd","name","data","required","validator","trigger","methods","$refs","validate","valid","console","log","then","res","status","setToken","token","$message","message","type","$router","push","error","component","service","method","url","students","params","studentDelete","id","info","qs","obj","getInfo","infoDelete","dataView","travel"],"sourceRoot":""}